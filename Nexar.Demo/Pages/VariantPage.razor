@page "/Variant"
@inherits AbstractPage

@if (VariantItem.Current is not null)
{
    <ItemPageHeader Text="Variant" Item=@VariantItem.Current />

    <TextField Label="Name" Text="@VariantItem.Current.Tag.Name" />

    <TextFieldCopy Label="Bom.Id" Text="@VariantItem.Current.Tag.Bom.Id" />

    <br />
    <MudTable Items=@VariantItem.Current.Tag.Bom.BomItems Dense=true>
        <ToolBarContent>
            <MudText Typo=Typo.h6>BOM Items</MudText>
        </ToolBarContent>
        <HeaderContent>
            <MudTh>Component.Name</MudTh>
            <MudTh>Quantity</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Value">@context.Component?.Name</MudTd>
            <MudTd DataLabel="Name">@context.Quantity</MudTd>
        </RowTemplate>
        <PagerContent>
            <MudTablePager />
        </PagerContent>
    </MudTable>

    <br />
    <AlertGraphQL Files="Project.WipVarians.graphql" />
}

@code {
    protected override void OnInitialized()
    {
        VariantItem.OnChange += StateHasChanged;
    }

    protected override void Disposing()
    {
        VariantItem.OnChange -= StateHasChanged;
    }
}
